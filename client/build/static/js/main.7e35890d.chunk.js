(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{70:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),c=n.n(a),s=n(7),i=n.n(s),o=(n(62),n(8)),l=n(14),j=n.n(l),u=n(20),d=n(24),b=n(16),O=n(12),h=n(18),v=function(e){var t=e.type,n=void 0===t?"text":t,a=e.change,c=e.isDisabled,s=void 0!==c&&c,i=e.placeholder,o=void 0===i?"":i,l=e.name,j=void 0===l?"":l;return Object(r.jsxs)("div",{className:"input-field col s12",children:[Object(r.jsx)("input",{type:n,name:j,onChange:a,disabled:s}),Object(r.jsx)("label",{htmlFor:j,children:o||j})]})};function x(){}var f=Object(a.createContext)({token:void 0,userId:void 0,signIn:x,signOut:x,isAuth:!1}),p=function(){var e=Object(a.useState)(!1),t=Object(O.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),s=Object(O.a)(c,2),i=s[0],o=s[1];return{loading:n,request:Object(a.useCallback)(function(){var e=Object(u.a)(j.a.mark((function e(t){var n,a,c,s,i,l=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"GET",a=l.length>2&&void 0!==l[2]?l[2]:null,c=l.length>3&&void 0!==l[3]?l[3]:{},r(!0),e.prev=4,a&&(a=JSON.stringify(a),c=Object(b.a)(Object(b.a)({},c),{},{"Content-Type":"application/json"})),e.next=8,fetch(t,{method:n,body:a,headers:c});case 8:return s=e.sent,e.next=11,s.json();case 11:if(i=e.sent,s.ok){e.next=14;break}throw new Error(i.message||"Something went wrong");case 14:return e.abrupt("return",i);case 17:throw e.prev=17,e.t0=e.catch(4),o(e.t0.message),e.t0;case 21:return e.prev=21,r(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[4,17,21,24]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:i,clearErrors:Object(a.useCallback)((function(){return o(null)}),[])}},m=function(){return Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";window.M&&e&&window.M.toast({html:e,classes:"error"===t?"red lighten-1":" blue lighten-2"})}),[])},g=function(){var e=Object(a.useContext)(f),t=m(),n=p(),c=n.loading,s=n.error,i=n.request,o=n.clearErrors,l=Object(a.useState)({email:"",password:""}),x=Object(O.a)(l,2),g=x[0],w=x[1];Object(a.useEffect)((function(){t(s,"error"),o()}),[s,t,o]);var k=function(e){var t=e.target;w(Object(b.a)(Object(b.a)({},g),{},Object(d.a)({},t.name,t.value)))},N=function(){var n=Object(u.a)(j.a.mark((function n(r){var a,c,s,o;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,n.next=4,i("/api/auth/login","POST",Object(b.a)({},g));case 4:a=n.sent,c=a.token,s=a.userId,o=a.message,t(o),e.signIn(c,s),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(1),console.error(n.t0),t(n.t0.message,"error");case 16:case"end":return n.stop()}}),n,null,[[1,12]])})));return function(e){return n.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)("h2",{className:"header center",children:"Sign in"}),Object(r.jsxs)("div",{className:"row",children:[Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)(v,{name:"email",type:"text",placeholder:"Email",change:k,isDisabled:c}),Object(r.jsx)(v,{name:"password",type:"password",placeholder:"Password",change:k,isDisabled:c})]}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col s12",children:Object(r.jsx)(h.b,{to:"/register",children:"I haven't got an account yet"})})}),Object(r.jsx)("div",{className:"row center",children:Object(r.jsx)("button",{className:"waves-effect waves-light btn-large",onClick:N,disabled:c,children:"Sign in"})})]})]})},w=n(105),k=n(106),N=n(107),y=n(40),C=n(108),S=n(111),E=n(104),I=n(47),D=n.n(I),T=function(){var e=Object(a.useState)(null),t=Object(O.a)(e,2),n=t[0],c=t[1],s=Object(a.useContext)(f),i=Object(o.g)();return Object(r.jsxs)("div",{children:[Object(r.jsx)(D.a,{onClick:function(e){c(e.currentTarget)}}),Object(r.jsx)(S.a,{id:"simple-menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:function(){c(null)},children:Object(r.jsx)(E.a,{onClick:function(e){e.preventDefault(),s.signOut(),i.push("/")},children:"Sign out"})})]})},P=Object(w.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),B=function(e){var t=e.title,n=P();return Object(r.jsx)("div",{className:n.root,children:Object(r.jsx)(k.a,{position:"static",children:Object(r.jsxs)(N.a,{children:[Object(r.jsx)(C.a,{edge:"start",className:n.menuButton,color:"inherit","aria-label":"menu",children:Object(r.jsx)(T,{})}),Object(r.jsx)(y.a,{variant:"h6",className:n.title,children:t}),Object(r.jsx)(C.a,{edge:"end",className:n.menuButton,color:"inherit","aria-label":"menu"})]})})})},F=function(){var e=Object(a.useContext)(f),t=m(),n=p(),c=n.loading,s=n.error,i=n.request,o=n.clearErrors,l=Object(a.useState)({en:"",translation:""}),x=Object(O.a)(l,2),g=x[0],w=x[1],k=Object(a.useRef)(""),N=Object(a.useRef)("");Object(a.useEffect)((function(){t(s,"error"),o()}),[s,t,o]);var y=function(e){var t=e.target;w(Object(b.a)(Object(b.a)({},g),{},Object(d.a)({},t.name,t.value)))},C=function(){var n=Object(u.a)(j.a.mark((function n(r){var a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,n.next=4,i("/api/dictionary/create","POST",Object(b.a)({},g),{Authorization:"Bearer ".concat(e.token)});case 4:a=n.sent,t(a.message),k.value="",N.value="",n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),console.error(n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}();return Object(r.jsxs)("div",{children:[Object(r.jsx)(B,{title:"Dictionary"}),Object(r.jsx)("div",{className:"container",style:{marginTop:"100px"},children:Object(r.jsxs)("div",{className:"row",children:[Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)(v,{ref:k,name:"en",type:"text",placeholder:"Word",change:y,isDisabled:c}),Object(r.jsx)(v,{ref:N,name:"translation",type:"text",placeholder:"Translation",change:y,isDisabled:c})]}),Object(r.jsx)("div",{className:"row center",children:Object(r.jsx)("button",{className:"waves-effect waves-light btn-large",onClick:C,disabled:c,children:"Create"})})]})}),Object(r.jsx)("div",{className:"fixed-action-btn",children:Object(r.jsx)("div",{className:"btn-floating btn-large red",children:Object(r.jsx)(h.b,{to:"/dictionary",disabled:c,children:Object(r.jsx)("i",{className:"large material-icons",children:"arrow_back"})})})})]})},q=n(103),J=n(77),_=n(110),A=n(109),G=Object(w.a)((function(e){return{root:{width:"100%",maxHeight:"90vh",backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto"},listSection:{backgroundColor:"inherit"},ul:{backgroundColor:"inherit",padding:0}}})),L=function(e){var t=e.dictionary,n=G();return console.log(t.list),Object(r.jsx)(q.a,{className:n.root,subheader:Object(r.jsx)("li",{}),children:Object.entries(t.list).map((function(e,t){return Object(r.jsx)("li",{className:n.listSection,children:Object(r.jsxs)("ul",{className:n.ul,children:[Object(r.jsx)(A.a,{children:e[0]}),e[1].map((function(t){var n=t.en,a=t.translation;return Object(r.jsx)(J.a,{divider:!0,children:Object(r.jsx)(_.a,{primary:n,secondary:a})},"item-".concat(e[0]+n))}))]})},"section-".concat(t))}))})},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};return e.sort((function(e,t){return e.en>t.en?1:-1})),e.forEach((function(e){var n=e.startLetter,r=e.en,a=e.translation;t[n]||(t[n]=[]),t[n].push({en:r,translation:a})})),console.log("finalList:",t),t},R=function(){var e=Object(a.useContext)(f),t=m(),n=p(),c=n.loading,s=n.error,i=n.request,o=n.clearErrors,l=Object(a.useState)({list:{}}),d=Object(O.a)(l,2),b=d[0],v=d[1],x=Object(a.useCallback)(Object(u.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i("/api/dictionary/","GET",null,{Authorization:"Bearer ".concat(e.token)});case 3:n=t.sent,console.log("dictionary res:",n),v({list:M(n)}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),[e,i]);return Object(a.useEffect)((function(){x()}),[x]),Object(a.useEffect)((function(){t(s,"error"),o()}),[s,t,o]),Object(r.jsxs)("div",{children:[Object(r.jsx)(B,{title:"Dictionary"}),Object(r.jsx)(L,{dictionary:b}),Object(r.jsx)("div",{className:"fixed-action-btn",children:Object(r.jsx)("div",{className:"btn-floating btn-large red",children:Object(r.jsx)(h.b,{to:"/dictionary/create",disabled:c,children:Object(r.jsx)("i",{className:"large material-icons",children:"library_add"})})})})]})},z=function(){var e=m(),t=p(),n=t.loading,c=t.error,s=t.request,i=t.clearErrors,o=Object(a.useState)({email:"",password:"",repeat_password:""}),l=Object(O.a)(o,2),x=l[0],f=l[1];Object(a.useEffect)((function(){e(c,"error"),i()}),[c,e,i]);var g=function(e){var t=e.target;f(Object(b.a)(Object(b.a)({},x),{},Object(d.a)({},t.name,t.value)))},w=function(){var t=x.password,n=x.repeat_password,r=x.email,a=!1;return t!==n?e("Passwords do not match","error"):r&&t&&n?a=!0:e("Fill all the fields","error"),a},k=function(){var t=Object(u.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),w()){t.next=3;break}return t.abrupt("return",!1);case 3:return t.prev=3,t.next=6,s("/api/auth/register","POST",{email:x.email,password:x.password});case 6:r=t.sent,e(r.message),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("h3",{className:"header center",children:"Create new account"})}),Object(r.jsxs)("div",{className:"row",children:[Object(r.jsxs)("form",{className:"col s12",children:[Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)(v,{name:"email",type:"text",placeholder:"Email",change:g,isDisabled:n}),Object(r.jsx)(v,{name:"password",type:"password",placeholder:"Password",change:g,isDisabled:n}),Object(r.jsx)(v,{name:"repeat_password",type:"password",placeholder:"Repeat password",change:g,isDisabled:n})]}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col s12",children:Object(r.jsx)(h.b,{to:"/auth",children:"I already have an account"})})})]}),Object(r.jsx)("div",{className:"row center",children:Object(r.jsx)("button",{className:"waves-effect waves-light btn-large orange",disabled:n,onClick:k,children:"Create account"})})]})]})},H="auth";var W=function(){var e=function(){var e=Object(a.useState)(void 0),t=Object(O.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(void 0),s=Object(O.a)(c,2),i=s[0],o=s[1],l=Object(a.useCallback)((function(e,t){r(e),o(t),localStorage.setItem(H,JSON.stringify({token:e,userId:t}))}),[]),j=Object(a.useCallback)((function(){r(void 0),o(void 0),localStorage.removeItem(H)}),[]);return Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem(H));if(e){var t=e.token,n=e.userId;t&&l(t,n)}}),[l]),{signIn:l,signOut:j,token:n,userId:i}}(),t=e.token,n=e.userId,c=e.signIn,s=e.signOut,i=!!t,l=function(e){return e?Object(r.jsxs)(o.d,{children:[Object(r.jsx)(o.b,{path:"/dictionary",exact:!0,children:Object(r.jsx)(R,{})}),Object(r.jsx)(o.b,{path:"/dictionary/create",exact:!0,children:Object(r.jsx)(F,{})}),Object(r.jsx)(o.a,{to:"/dictionary"})]}):Object(r.jsxs)(o.d,{children:[Object(r.jsx)(o.b,{path:"/",exact:!0,children:Object(r.jsx)(g,{})}),Object(r.jsx)(o.b,{path:"/register",exact:!0,children:Object(r.jsx)(z,{})}),Object(r.jsx)(o.a,{to:"/"})]})}(i);return Object(r.jsx)(f.Provider,{value:{token:t,userId:n,signIn:c,signOut:s,isAuth:i},children:Object(r.jsx)(h.a,{children:l})})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,113)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};n(70),n(71);i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(W,{})}),document.getElementById("root")),K()}},[[72,1,2]]]);
//# sourceMappingURL=main.7e35890d.chunk.js.map